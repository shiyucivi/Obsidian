#### 3.1 用户与用户组
##### 3.1.1 查看与切换当前用户
查看当前用户与当前用户权限：
```shell
whoami  #查看当前用户名
groups  #查看当前用户的组
groups user1 #查看user1用户的组
```
root用户可以修改系统的所有文件，普通用户一般只能修改用户目录下的文件
```shell
su root #切换为root用户
exit #退出到上一用户
sudo rm -rf /usr/bin/nginx #以root用户身份删除nginx目录
```
普通使用sudo执行命令需要root授权，可以在/etc/sudoers配置文件中进行授权，也可以将用户添加入sudo用户组来授权
```shell
sudo vi /etc/sudoers
# 添加：
[用户名] ALL=(ALL)  NOPASSWORD:ALL
```
##### 3.1.2 创建用户与用户组
==创建用户和用户组==需要使用root账号
```shell
su root
groupadd front  #创建一个名为front的用户组
cut -d: -f1 /etc/group #列出所有组名
groupdel front #删除front用户组

useradd user1 -g front -m  #创建一个名为user1的用户，-g表示指定用户加入front用户组，如果不用-g指定用户组，那么会创建一个名为user1的用户组并加入。-m表示创建后会自动在/home下创建一个名为user1的目录，有些版本的linux会自动创建同名目录
userdel user1 -r #删除user1用户，-r表示删除用户目录/home/user1
cut -d: -f1 /etc/passwd #列出系统中所有用户
id user1 #查看user1用户的组
usermod -aG sudo user1 #将用户user1添加到sudo用户组中
gpass -d user1 front #将用户user1从front用户中删除
```
##### 3.1.3 getent 查看用户与用户组信息
gentent用于从系统的配置中查找配置，使用gentent命令查看用户和用户组相关信息：
```shell
getent group  #列出所有的用户组
getent group front #列出front用户组下的成员
getent passwd  #列出所有的用户
getent passwd | cut -d: -f1 #列出所有用户的用户名
```
##### 3.1.4 用户的主组
每个用户在/etc/passwd配置中设定了一个主组，即gid所代表的组。==用户创建文件或目录时，这个文件或目录的组就是用户的主组==
```shell
$ id
uid=1000(civi) gid=1000(civi) groups=1000(civi),4(adm) #主组为civi
```
#### 3.2 文件与目录权限控制
##### 3.2.1 查看文件与目录权限

使用`ll`命令可以列出当前目录下文件与目录的权限信息
```shell
$ ll
-rw-rw-r-- 1 civi civi   65 Nov 22 17:12 index.html
drwxr-x---  2 user1 front 4096 Nov 22 23:34 user1/ #user1代表目录属于user1用户，front代表所属用户组为front
```
其中以空格分割的第1个部分10个字符表示用户权限详情，可以分为4个子部分：
第1个字符表示文件或目录类型，-表示文件，d表示目录
==第2-4的字符表示所属用户权限，5-7所属用户组权限，7-10其他用户权限==。r代表读取，w代表写入，x代表执行。因此drwxr-x---表示：该目录对user1用户的权限为rwx，对组内其他用户权限为r-x即只可读写执行，对非组内其他用户权限为---即无任何权限。
##### 3.2.2 修改文件与目录权限
chmod可以修改目录和文件对于各种用户的权限
```shell
chmod -R u=rwx,g=rwx,o=rx app  #将app目录及目录下所有文件与子目录的权限修改为：rwxrwxr-x
#令快捷修改方式：
chmod -R 775 #7代表rwx，5代表r-x
```
chown可以修改目录和文件所属用户和用户组，此命令只能root用户执行
```shell
chown user1 index.html #将index.html所属用户改为root
chown :front index.html #将index.html所属用户组改为front
chown user1:front index.html #同时进行上面两步操作
chown -R user1:front dist #修改dist目录的用户为user1，用户组为front
```