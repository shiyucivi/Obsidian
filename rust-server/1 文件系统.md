### 1 fs
rust中fs库主要用于读取文件和写入文件。
#### 1.1 文件操作
```rust
let file = fs::File::create(path);  //创建文件并返回File结构体
let file = fs::File::open(path); //读取文件并返回File结构体
fs::read(path); //读取文件为Vec<u8>
fs::read_to_string(path); //读取文件为UFT-8格式的String
file.write(&String.as_bytes()); //追加写入字符串，注意参数为&[u8]
file.write_all(&String.as_bytes()); //覆盖写入字符串
```
#### 1.2 目录操作
```rust
fs::create_dir(path); //创建单层目录
fs::create_dir_all(path);  //创建多层目录
fs::read_dir(path);  //读取目录，返回一个ReadDir迭代器
fs::remove_dir(path); //删除目录
fs::remove_dir_all(path); //递归删除目录
```
### 2 io
io库中为File、TcpStream、内存缓冲区等数据类型封装了读取、写入、移动读写位置等的trait。
#### 2.1 核心trait
io提供了几个核心的trait用于对文件进行各种操作
1. Read。从源读取字节。
Read是对所有可读对象（文件、网络流、内存缓冲区）进行操作的抽象。实际当中应该避免直接使用Read的方法。而是使用性能更高的BufRead。
2. Write。向目标中写入字节。
3. Seek。在支持随机访问的源中移动读写位置。
4. BufRead。带缓冲区的读取，支持按行读取。
#### 2.2 BufRead
`BufReader` 是标准库中用于**带缓冲读取**的核心工具，它包装任意实现了 `Read` trait 的类型（如 `File`、`TcpStream`、`Cursor<Vec<u8>>` 等），通过内部缓冲区减少系统调用次数，显著提升 I/O 性能。
```rust
use std::io::{BufReader, Read};

let file = std::fs::File::open("data.txt")?;
//创建一个缓冲区，默认大小为8kb
let mut reader = BufReader::new(file);

//
let mut buf = [0; 1024];
reader.read(&mut buf)?; // 将前1024个字节读取到buf中
```
BufReader最重要的功能是实现了按行读取和分块读取的操作，常用于解析各种格式化文件与http协议：
```rust
let mut line = String::new();
// 将文件按行读取到line中
while reader.read_line(&mut line)? > 0 {
    println!("Line: {}", line.trim_end());
    line.clear(); // 重用 String 避免重复分配
}
// lines方法会返回一个Lines迭代器，每次迭代返回一行的Result
for line in reader.lines() {
    let line = line?;
    process(line);
}
```
#### 2.3 错误处理
所有的IO操作均返回`Result<T, std::io::Error>`类型。推荐使用?进行错误传播或thiserror自定义错误类型。
### 3 Path

### 4 tokio中的文件异步操作