## 1 项目结构
一个项目中可以包含多个crate。一整个项目称为一个package。
create分为两种：
binary crate用于构建可执行文件，入口文件是main.rs，必须有一个fn main。
library用于提供可复用的库，入口文件是lib.rs，不需要fn main。
一个package中可以包含多个binary crate。但最多只能有一个binary crate。
目录结构：
```
my_project/
├── Cargo.toml
└── src
     └── main.rs   ← binary crate 入口
     └── lib.rs   ← library crate 入口
```
## 2 模块化
### 2.1 mod
可以在lib.rs入口中使用mod关键字声明一个模块。通常用在lib.rs中。
如果想在其他文件中使用，必须加上pub关键字。否则只能在模块内访问。
#### 2.1.1 内联声明
```rust
// src/lib.rs
pub mod my_module {
	fn private_func() {
        println!("This is private");
    }
    pub fn public_func() {
        private_func(); // 模块内部可以调用私有项
        println!("This is public");
    }
}
// src/main.rs
use my_app::my_module; //格式为项目名称::模块名称
fn main() {
  my_module.public_func();
}
```
#### 2.1.2 声明文件
```rust
// src/lib.rs
pub mod models;
// src/models.rs
pub fn get_a_map -> HashMap<&'static str, &'static str> {
  let mut map = HashMap::new();
  map.insert("key1", "value1");
  map.insert("key2", "value2");
  map
}
// src/main.rs
use my_app::models;
fn main() {
  let map = get_a_map();
}
```
#### 2.1.3 声明目录
在一个目录下创建一个mod文件。然后在lib.rs中声明mod
```rust
// src/json_formatter/mod.rs
pub fn json_serialization() {}
// src/lib.rs
pub mod json_formatter;
// src/main.rs
use my_app::json_formatter;
fn main() {
  json_formatter.json_serialization()
}
```
#### 2.1.3 创建子模块
例如想在models模块中创建一个名为enums的子模块，需要创建一个模块同名的目录：
```rust
// src/lib.rs
pub mod models;
// src/models.rs
pub mod enums;
// src/models/enums.rs
enum Colors  {
  Red,
  Green,
  Blue
}
// src/main.rs
use my_app::models;
let red: Colors = models::enums::Colors::Red;
```
### 2.2 声明结构体
结构体的字段和方法默认也是private的。想在其他模块中使用必须加上pub关键字。
```rust
// src/models/struct.rs
use crate::models::enums; //在同一个crate中，可以用crate指代当前crate
pub struct Pen {
  private price: f32,
  pub color: enums::Colors
}
// src/main.ts
use my_app::models;
let pen = models::Pen {
  color: models::enums.Colors.Red,
  price: 1.99 //❌报错，price是私有的
}
```
